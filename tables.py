import sqlite3
from config import *

class DBManager:
    def __init__(self, db_file):
        self.conn = sqlite3.connect(db_file, check_same_thread=False)
        self.cursor = self.conn.cursor()
        self.create_tables()

    def create_tables(self):
        self.cursor.execute('''
            CREATE TABLE IF NOT EXISTS recommendations (
                id INTEGER PRIMARY KEY,
                category TEXT,
                content TEXT
            )
        ''')
        self.conn.commit()

    def add_recommendation(self, category, content):
        self.cursor.execute('INSERT INTO recommendations (category, content) VALUES (?, ?)', (category, content))
        self.conn.commit()

    def get_recommendation(self, category):
        self.cursor.execute('SELECT content FROM recommendations WHERE category = ? ORDER BY RANDOM() LIMIT 1', (category,))
        result = self.cursor.fetchone()
        return result[0] if result else None

    def get_all_categories(self):
        self.cursor.execute('SELECT DISTINCT category FROM recommendations')
        return [row[0] for row in self.cursor.fetchall()]

#–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ –±–¥.
initial_recommendations = {
"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ": "üíª –ù–∞—á–Ω–∏—Ç–µ —Å Python! –≠—Ç–æ –∫–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä LEGO –¥–ª—è –∫–æ–¥–∞ - –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –º–æ—â–Ω—ã–π. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤!",
"–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥": "üì£ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ - —ç—Ç–æ –∫–∞–∫ –≥–æ—Ç–æ–≤–∏—Ç—å –≤–∫—É—Å–Ω—ã–π —Å—É–ø. –ù—É–∂–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (4P: Product, Price, Place, Promotion) –∏ —â–µ–ø–æ—Ç–∫–∞ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏!",
"B2B –ø—Ä–æ–¥–∞–∂–∏": "ü§ù B2B –ø—Ä–æ–¥–∞–∂–∏ - —ç—Ç–æ –∫–∞–∫ –±—ã—Ç—å –¥–µ—Ç–µ–∫—Ç–∏–≤–æ–º –≤ –º–∏—Ä–µ –±–∏–∑–Ω–µ—Å–∞. –ò—â–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–º–ø–∞–Ω–∏–π –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è!",
"–î–∏–∑–∞–π–Ω": "üé® –î–∏–∑–∞–π–Ω - —ç—Ç–æ –∫–∞–∫ —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞—Ç—å –º–∏—Ä. –ù–∞—á–Ω–∏—Ç–µ —Å –æ—Å–Ω–æ–≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞, UX/UI –∏–ª–∏ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞.",
"–§–∏–Ω–∞–Ω—Å—ã": "üí∞ –§–∏–Ω–∞–Ω—Å—ã - —ç—Ç–æ –∫–∞–∫ –∏–≥—Ä–∞ –≤ —à–∞—Ö–º–∞—Ç—ã —Å –¥–µ–Ω—å–≥–∞–º–∏. –ò–∑—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã: –±—É—Ö—É—á–µ—Ç, –∞–Ω–∞–ª–∏–∑ –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏.",
"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏": "üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ - —ç—Ç–æ –∫–∞–∫ –¥–∏—Ä–∏–∂–∏—Ä–æ–≤–∞—Ç—å –æ—Ä–∫–µ—Å—Ç—Ä–æ–º. –ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å Agile –∏ Scrum - —ç—Ç–æ –≤–∞—à–∏ –¥–∏—Ä–∏–∂–µ—Ä—Å–∫–∏–µ –ø–∞–ª–æ—á–∫–∏!",
"Data Science": "üî¨ Data Science - —ç—Ç–æ –∫–∞–∫ –±—ã—Ç—å –¥–µ—Ç–µ–∫—Ç–∏–≤–æ–º –≤ –º–∏—Ä–µ —á–∏—Å–µ–ª. –ù–∞—á–Ω–∏—Ç–µ —Å Python –∏–ª–∏ R, –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ —â–µ–ø–æ—Ç–∫—É –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.",
"–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å": "üõ°Ô∏è –ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - —ç—Ç–æ –∫–∞–∫ –±—ã—Ç—å —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–º –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–º –º–∏—Ä–µ. –ó–∞—â–∏—â–∞–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –∑–ª–æ–¥–µ–µ–≤!",
"–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç": "ü§ñ –ò–ò - —ç—Ç–æ –∫–∞–∫ —É—á–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä –¥—É–º–∞—Ç—å. –ù–∞—á–Ω–∏—Ç–µ —Å –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –∏ –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π.",
"–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞": "üåê –í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ - —ç—Ç–æ –∫–∞–∫ —Å—Ç—Ä–æ–∏—Ç—å digital-–¥–æ–º–∞. HTML - —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, CSS - –¥–∏–∑–∞–π–Ω, JavaScript - –≤—Å–µ –∫—Ä—É—Ç—ã–µ —Ñ–∏—à–∫–∏!",
"–ú–æ–±–∏–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞": "üì± –ú–æ–±–∏–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ - —ç—Ç–æ –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–æ–ª—à–µ–±–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏ –¥–ª—è —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ iOS –∏–ª–∏ Android –∏ —Ç–≤–æ—Ä–∏—Ç–µ —á—É–¥–µ—Å–∞!",
"–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ": "üöÄ –ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å—Ç–≤–æ - —ç—Ç–æ –∫–∞–∫ –≤—ã—Ä–∞—â–∏–≤–∞—Ç—å –¥–µ—Ä–µ–≤—å—è. –ü–æ—Å–∞–¥–∏—Ç–µ –∏–¥–µ—é, –ø–æ–ª–∏–≤–∞–π—Ç–µ —É–ø–æ—Ä—Å—Ç–≤–æ–º, –∏ –æ–¥–Ω–∞–∂–¥—ã –æ–Ω–∞ –ø—Ä–∏–Ω–µ—Å–µ—Ç –ø–ª–æ–¥—ã!",
"–ë–ª–æ–∫—á–µ–π–Ω": "‚õìÔ∏è –ë–ª–æ–∫—á–µ–π–Ω - —ç—Ç–æ –∫–∞–∫ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–µ–π—Ñ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∫–ª—é—á–µ–π. –ò–∑—É—á–∏—Ç–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã.",
"UX/UI –¥–∏–∑–∞–π–Ω": "üñºÔ∏è UX/UI –¥–∏–∑–∞–π–Ω - —ç—Ç–æ –∫–∞–∫ –±—ã—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–æ–º —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫—Ä–∞—Å–∏–≤—ã–µ –∏ —É–¥–æ–±–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã!"
}

db_manager = DBManager(DATABASE)

#for category, content in initial_recommendations.items():
#    db_manager.add_recommendation(category, content)